extends admin

block content_admin
  link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous")
  script(src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous")
  script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous")

  .admin-screen
    nav.navbar
      .container-fluid.mt-5
        .form-add-user.d-flex.gap-5
          form.d-flex(role="search")
            input#searchGuide.form-control.me-2(style='font-size: 12px', type="search", placeholder="Tìm kiếm ...", aria-label="Search")
          //- button#addGuide.btn.btn-success(type="button", data-bs-toggle="modal", data-bs-target="#exampleModalAddGuide", data-user=user) Thêm HDV

    .d-flex.flex-column.align-items-start.mt-4
      .div
        select.rowsPerBookingPage.form-select(aria-label="Default select example")
          option(value="5") 5
          option(selected, value="10") 10
          option(value="20") 20
          option(value="50") 50
          option(value="100") 100

    #bookingTable
      include partials/bookingTable

    #paginationWrapper
      include partials/pagination
    
  //- script.
  //-   $(document).ready(function() {
  //-     function updateTableAndPagination(page, rowsPerBookingPage, searchQuery) {
  //-       $.get('/admin/guide', { page: page, rowsPerPage: rowsPerBookingPage, search: searchQuery }, function(data) {
  //-         $('#bookingTable').html(data.bookingTableHtml);
  //-         $('#paginationWrapper').html(data.paginationHtml);
  //-       });
  //-     }
      
  //-     $(document).on('click', '.page-link', function(e) {
  //-       e.preventDefault();
  //-       const page = $(this).data('page');
  //-       const rowsPerBookingPage = $('.rowsPerBookingPage').val();
  //-       window.scrollTo({
  //-         top: 0,
  //-         behavior: 'smooth' 
  //-       });
  //-       const searchQuery = $('#searchGuide').val();
  //-       updateTableAndPagination(page, rowsPerBookingPage, searchQuery);
  //-     });

  //-     $('.rowsPerBookingPage').on('change', function() {
  //-       const rowsPerBookingPage = $(this).val();
  //-       const searchQuery = $('#searchGuide').val();
  //-       updateTableAndPagination(1, rowsPerBookingPage, searchQuery); 
  //-     });

  //-     function debounce(func, wait) {
  //-       let timeout;
  //-       return function(...args) {
  //-         const later = () => {
  //-           clearTimeout(timeout);
  //-           func(...args);
  //-         };
  //-         clearTimeout(timeout);
  //-         timeout = setTimeout(later, wait);
  //-       };
  //-     }

  //-     const debouncedSearch = debounce(function() {
  //-       const searchQuery = $('#searchGuide').val();
  //-       const rowsPerBookingPage = $('.rowsPerBookingPage').val();
  //-       console.log(searchQuery)
  //-       updateTableAndPagination(1, rowsPerBookingPage, searchQuery);
  //-     }, 300);

  //-     $('#searchGuide').on('input', debouncedSearch);




  //-     // validation
  //-     const forms = document.querySelectorAll('.needs-validation')
  //-     Array.from(forms).forEach(form => {
  //-       form.addEventListener('submit', event => {
  //-         event.preventDefault() // ngăn submit và reload
  //-         event.stopPropagation()
  //-         form.classList.add('was-validated')
                    
  //-       }, false)
  //-     })
           

  //-     // hehehe
      
  //-   });
